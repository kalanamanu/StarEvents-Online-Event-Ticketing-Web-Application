@model StarEvents.Models.CustomerProfileViewModel

@{
    ViewBag.Title = "Edit Profile";
    var photoUrl = string.IsNullOrEmpty(Model.ProfilePhoto)
        ? Url.Content("~/Content/images/avatar-default.png")
        : Url.Content(Model.ProfilePhoto);
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-7">
            <div class="card shadow p-4">
                <div class="text-center mb-3">
                    <img src="@photoUrl" alt="Profile Photo" class="rounded-circle mb-3" style="width:100px;height:100px;object-fit:cover;" />
                </div>
                <h3 class="text-center mb-4">Edit Profile</h3>
                @using (Html.BeginForm("EditProfile", "Customer", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    @Html.AntiForgeryToken()
                    <!-- Image Upload: MATCHES Register style -->
                    <div class="mb-3">
                        @Html.Label("Profile Picture")
                        <input type="file" name="CustomerProfilePhoto" class="form-control" accept="image/*" />
                        <small class="text-muted">Upload a new profile picture (JPEG, PNG, max 2MB).</small>
                    </div>
                    <div class="mb-3">
                        @Html.LabelFor(m => m.FullName)
                        @Html.TextBoxFor(m => m.FullName, new { @class = "form-control", required = "required" })
                        @Html.ValidationMessageFor(m => m.FullName)
                    </div>
                    <div class="mb-3">
                        @Html.LabelFor(m => m.Email)
                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @readonly = "readonly" })
                    </div>
                    <div class="mb-3">
                        @Html.LabelFor(m => m.Phone)
                        @Html.TextBoxFor(m => m.Phone, new { @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Phone)
                    </div>
                    <div class="mb-3">
                        @Html.LabelFor(m => m.Address)
                        @Html.TextBoxFor(m => m.Address, new { @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Address)
                    </div>
                    <div class="mb-3">
                        @Html.LabelFor(m => m.Gender)
                        @Html.DropDownListFor(m => m.Gender, new SelectList(new[] { "Male", "Female", "Other" }, Model.Gender), "Select Gender", new { @class = "form-control" })
                        @Html.ValidationMessageFor(m => m.Gender)
                    </div>
                    <div class="mt-4 text-center">
                        <button type="submit" class="btn btn-primary px-5">Save Changes</button>
                        <a href="@Url.Action("Profile", "Customer")" class="btn btn-outline-secondary ms-2">Cancel</a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>